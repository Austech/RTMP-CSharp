using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net.Sockets;
using System.IO;

namespace RTMPTests
{
    class RTMPClientOld
    {
        public enum ClientStates
        {
            None,
            Handshake,
            SendChunkSize,
            Publish,
            SendSettings,
            InProgress,
        }

        private const int HANDSHAKE_TOKEN_SIZE = 1536;

        private ClientStates currentState;

        private TcpClient tcpClient;

        public RTMPClientOld()
        {
            currentState = ClientStates.None;
            tcpClient = new TcpClient();
        }

        //port is 1935 by default
        public void Connect(string address, ushort port = 1935)
        {
            try
            {
                tcpClient.Connect(address, port);
                tcpClient.NoDelay = true;
                Console.WriteLine("Connected");
                sendHandShakeStart();
            }
            catch (Exception ex)
            {
                currentState = ClientStates.None;
                Console.WriteLine(ex);
            }
        }

        private void sendHandShakeStart()
        {
            currentState = ClientStates.Handshake;
            var handshakeData =
                new byte[]
                    {
                        #region Byte Data
                        0x03,0x00,0x00,0x00,0x00,0x09,0x00,0x7c,0x02,0xf7,0x78,0x55,0x1e,0xce,0xab,0x8e,0x1e,0x36,0x2f,0x07,0xc5,0x86,0x8a,0x70,0xb2,0x66,0xd4,0x02,0x20,0xe5,0x08,0x61,0x18,0xa2,0x2e,0x36,0x97,0xd5,0xfc,0x2b,0x63,0x29,0xc2,0x2e,0xe7,0xc7,0xc9,0xb0,0xb5,0xb3,0x45,0xdf,0xa8,0x39,0x8f,0xea,0x3b,0xc8,0x79,0x20,0x8a,0x10,0x68,0x42,0x5a,0xa1,0x17,0x4c,0xb5,0x72,0x58,0xcf,0xeb,0xe2,0x4d,0xa4,0x2e,0xc4,0xff,0x9d,0xa1,0x9c,0x7b,0x40,0x6f,0x18,0xc9,0x5b,0xfd,0xd0,0x4e,0xe4,0x8b,0x6f,0x83,0x32,0x14,0xa4,0x7b,0x8b,0xf6,0x8e,0xb0,0x52,0x54,0xe2,0x5a,0xe9,0xa9,0xa8,0xb4,0x96,0xc5,0x49,0x6f,0x6e,0x9c,0xd7,0xc6,0x8c,0xb6,0xbc,0xc8,0x41,0x69,0xe6,0x7f,0x3e,0x37,0x2f,0xfe,0x18,0x6d,0xa8,0x51,0x38,0x62,0xc5,0xaf,0xde,0xb5,0xa1,0x21,0x8a,0x86,0x0b,0xac,0xcd,0xd8,0x69,0xb2,0x53,0xdb,0xab,0x8a,0x0e,0xfb,0x59,0xa4,0x8c,0x44,0x20,0x99,0x87,0x5e,0x55,0xb7,0x4f,0xd0,0x7a,0x1b,0x69,0xaf,0x30,0x3e,0x09,0x98,0x73,0xcb,0x77,0xe2,0xd9,0xe2,0xc4,0x74,0x1e,0xb1,0xf5,0x06,0xa7,0xf0,0xb2,0x96,0x2a,0xf9,0x1f,0x50,0x51,0xc8,0x90,0xa3,0x20,0x99,0x4f,0x4c,0x8b,0x36,0xa0,0x1f,0xa9,0xc0,0xf1,0x5f,0x4b,0x7c,0xf7,0xb6,0xc3,0x81,0x7d,0xa6,0x09,0x18,0x61,0x1d,0x3b,0x02,0xff,0x7c,0xc9,0x40,0x38,0x93,0x75,0x37,0xd3,0x38,0x2e,0x41,0x6b,0xd5,0x75,0x77,0x83,0x4d,0xf9,0xca,0xf7,0x48,0x35,0x21,0x50,0xce,0x92,0xd0,0xdb,0xb4,0x0e,0x87,0x1f,0xc3,0x64,0xe1,0x8b,0x7e,0x35,0x69,0xe3,0x98,0x76,0xc1,0xae,0x0c,0xb7,0x9f,0xf6,0xd7,0xab,0x32,0xf9,0xf0,0x11,0x86,0x9c,0x8d,0xa4,0x19,0x1e,0xf4,0x6d,0x3c,0x1b,0xc6,0xb7,0x2d,0x83,0x81,0x2f,0x22,0x43,0xd1,0x75,0x2a,0x41,0x26,0x32,0xd6,0x6a,0x20,0x75,0xf5,0xd3,0x02,0xf4,0x5c,0xdf,0x2b,0x98,0xb8,0x02,0xb7,0x98,0x05,0xdc,0x48,0x37,0xd8,0x4e,0xde,0xd1,0xcc,0x42,0xcb,0xa7,0xee,0xc3,0x13,0x7b,0xf8,0x6d,0xd0,0xb2,0xd7,0xf6,0x24,0xd5,0x21,0xa3,0xff,0x65,0x5b,0xcf,0x0d,0xf4,0x10,0x13,0x41,0xd2,0x30,0xe9,0x46,0x51,0x62,0x8e,0x45,0xa7,0xab,0xf8,0x18,0x31,0x01,0xce,0x98,0x1e,0x5e,0x86,0xa6,0xfa,0xec,0x5c,0x79,0xaa,0x7e,0xc7,0x18,0x1e,0xa4,0x59,0xed,0x96,0x6e,0x0c,0x93,0x2a,0x6f,0x9e,0x4b,0xf5,0x54,0xab,0x7b,0x1c,0x90,0x5c,0xde,0x05,0x4e,0xd4,0x0d,0x2f,0xb8,0x9b,0xbf,0xc6,0x57,0x52,0xe5,0x8c,0xfd,0xe4,0xf2,0xa0,0x4d,0xc3,0xad,0x1e,0x5e,0xf4,0xfc,0x64,0xd5,0x7b,0x07,0x1c,0x14,0x14,0x6a,0x45,0x1f,0x6a,0x04,0x31,0x56,0xd2,0x88,0x0f,0x59,0x57,0xd7,0x8d,0xfd,0x3f,0xf2,0xb8,0x80,0xf6,0x24,0xac,0x70,0xf2,0x70,0x94,0xf3,0x77,0x34,0xea,0xf1,0x92,0x4f,0x66,0xac,0x3d,0x64,0x8a,0xe2,0x32,0x93,0x05,0x44,0xa4,0x42,0x0b,0x65,0xee,0xd4,0x69,0x6f,0x7f,0x50,0xfe,0x05,0xfc,0x94,0x85,0x16,0x65,0x0b,0xfb,0x9b,0x65,0xf9,0x53,0xd8,0x48,0xe3,0x45,0x69,0x65,0xd0,0xd7,0x6b,0x62,0x7a,0x84,0xe3,0x5e,0x9d,0xda,0xbd,0x8b,0x43,0xf0,0xfa,0xda,0xee,0x45,0x8c,0xdf,0x59,0xeb,0xd7,0x73,0x92,0x2e,0x0a,0xe5,0x07,0xd5,0xe6,0x40,0x92,0xe9,0x0e,0xc6,0x7e,0xd8,0x43,0x9e,0x8f,0x22,0x1c,0x75,0x3a,0x9f,0x92,0x16,0xf1,0xcb,0x85,0xb5,0x10,0x7b,0xc7,0xcc,0x7c,0x4f,0xb2,0xc3,0xee,0xd1,0xaf,0xc7,0x09,0xb1,0x92,0xf5,0x0d,0xe6,0x9c,0x1f,0xfc,0xa5,0x65,0x0e,0xfb,0x52,0x3b,0x5f,0xab,0x59,0x97,0xca,0xc4,0xb7,0xef,0x5a,0xf2,0xbf,0x59,0x73,0xe6,0x29,0x3b,0xae,0x1f,0xc1,0xda,0x49,0x9b,0xe5,0x51,0x50,0x77,0xde,0x4d,0xdb,0x3f,0x7f,0xbc,0xd7,0x41,0x71,0x1c,0x62,0xb7,0xd8,0x03,0xb8,0xd0,0x54,0xcf,0x57,0x81,0x82,0x71,0x4d,0x1c,0x44,0x5b,0xd6,0x92,0xba,0x1b,0x83,0x9a,0x09,0xe7,0x26,0x6f,0xc8,0x5d,0xaa,0x8f,0xad,0x43,0x3d,0xab,0xbd,0x20,0x6c,0xde,0x1e,0xa5,0x71,0x77,0x0c,0x6b,0xfa,0x79,0x56,0xc2,0x66,0xee,0x84,0x35,0xeb,0x01,0xca,0xa6,0xf5,0x83,0xc0,0xd8,0x3c,0x33,0xee,0xfc,0xf3,0xf9,0x7d,0xb9,0x17,0xbd,0xb2,0x99,0xf8,0xa8,0x9f,0xb8,0x86,0x0a,0xb1,0xcd,0x64,0x4c,0x1e,0x82,0xcc,0xe1,0x32,0x3a,0x9e,0xb7,0x9d,0x25,0xf5,0xdc,0x57,0x0b,0x70,0xb4,0x0b,0xb2,0x00,0x61,0x74,0x33,0x53,0xd0,0x53,0x6e,0xcd,0xab,0xd8,0x2f,0x22,0x77,0x75,0x62,0x28,0xcb,0x54,0xfe,0x69,0x32,0xc4,0xc9,0xbd,0x13,0x0d,0x2b,0xfc,0x70,0x0b,0xf5,0xd8,0x5d,0xa6,0x94,0x6e,0x96,0xf8,0x2e,0x0a,0xfd,0x8e,0x9c,0x20,0xcf,0xea,0xbf,0x9a,0x6a,0x18,0x9b,0xb1,0x7b,0xbe,0xf5,0x39,0xd1,0xd9,0xe7,0x3e,0xe9,0x66,0xfc,0xb5,0xd6,0xbd,0xbf,0x98,0x44,0x4d,0xe8,0x65,0xbe,0x16,0x05,0xe3,0x40,0x87,0xb3,0x4c,0xdf,0x04,0xe3,0xaf,0xf5,0x5b,0xd4,0x13,0x7c,0x52,0x2d,0x2e,0x3c,0x7b,0xf2,0x63,0x4d,0xb3,0x26,0xb2,0x2a,0x47,0x4d,0xb7,0xf8,0xa0,0x95,0x2a,0xb3,0x51,0x0d,0xe5,0x55,0x39,0x6c,0x18,0xa3,0x78,0xa8,0x39,0x0b,0x73,0xbf,0xf7,0x77,0x2f,0xb2,0x76,0x0f,0xa5,0x78,0x6a,0x3b,0x04,0x59,0xc4,0x5a,0x1d,0x1b,0x0d,0xff,0x4c,0xbb,0xb6,0x5d,0xa0,0xed,0x34,0xf3,0x21,0x16,0xc3,0xc2,0xcc,0x2b,0x95,0x82,0x51,0x11,0xbc,0xfb,0xb2,0x46,0xc1,0x50,0x5a,0xa0,0x0c,0x97,0x0d,0x06,0xd7,0x6c,0xc9,0x50,0xce,0x36,0x8b,0x22,0x0d,0xb2,0x04,0x87,0xcb,0xa0,0x2b,0xb1,0xfc,0x54,0xb3,0x65,0x67,0xb4,0x29,0x13,0xd6,0xb8,0x85,0x06,0x2c,0xd7,0x79,0x56,0x01,0xd3,0x1a,0x4a,0x8e,0x6d,0x56,0x46,0x7f,0xa5,0xc5,0x21,0x62,0x67,0x6f,0xd5,0x26,0x12,0x25,0x13,0xc3,0xe4,0x7f,0x2e,0x6d,0x9d,0x6a,0x19,0xc4,0xf8,0x79,0x54,0x31,0xa9,0x4c,0xed,0x03,0x92,0x21,0xd2,0x7a,0xc6,0x8a,0x7a,0x77,0x0e,0x93,0x05,0x25,0x22,0x71,0x45,0x9b,0x71,0xd0,0x55,0x05,0xc4,0x97,0x7b,0x70,0xe9,0x68,0x51,0x20,0x8b,0xac,0xdc,0xdf,0x7e,0x68,0x2b,0x38,0x48,0x84,0x08,0x80,0xf1,0xfe,0xc2,0xa3,0x2f,0xb1,0x40,0x68,0x62,0xbc,0x83,0xca,0xd8,0x9a,0xdf,0x72,0x9f,0x3b,0xa6,0xff,0xd3,0xfe,0x80,0x8e,0x84,0x03,0xe7,0xc6,0xa0,0xf6,0xdc,0xda,0x32,0x11,0x89,0x8f,0x6f,0x16,0x50,0x5b,0x07,0x8c,0xc7,0x8b,0x80,0xdb,0x60,0x0d,0xed,0x2f,0x20,0x0f,0x25,0xff,0x5d,0xcb,0x31,0xd3,0x2c,0xbe,0x20,0x56,0xb8,0xbd,0xc3,0x10,0x91,0x63,0x1a,0xbb,0xd2,0xac,0x28,0xd6,0x1f,0xe3,0x24,0x80,0xec,0x50,0x35,0xbb,0xf3,0x5f,0x17,0x33,0x93,0xf0,0xd5,0x9a,0x21,0xd2,0x30,0x0b,0x2d,0xb4,0xb5,0x9e,0xaa,0x63,0xff,0xe0,0xf9,0x3d,0x65,0xdc,0x02,0x85,0x16,0x90,0x5f,0x22,0xa9,0xc7,0xdf,0xf3,0x87,0xc4,0xeb,0x78,0xc6,0x30,0x0e,0x7e,0xbb,0xb2,0xa6,0x66,0x3c,0xfb,0xe5,0xa9,0x97,0x7c,0xaf,0x57,0x64,0xba,0x3f,0x0a,0xba,0x57,0xdb,0x4e,0x60,0x51,0xe0,0xae,0xc6,0xe0,0x5b,0x1b,0xda,0xa6,0x49,0xa9,0x78,0x75,0xed,0xbc,0x40,0xbc,0xc4,0x21,0x4b,0xb7,0xfe,0xf7,0x27,0x30,0xd4,0x36,0x8a,0xcb,0xd3,0xe1,0x0a,0xb4,0xc7,0x64,0x2a,0x1c,0x53,0xf9,0x3c,0xa2,0x6d,0xb9,0xc7,0x66,0x55,0x5b,0xe2,0x6f,0xdf,0xf0,0xe2,0xa7,0x21,0x42,0x5b,0x95,0x76,0x2b,0x0b,0x77,0x6f,0xd3,0xe3,0xeb,0x17,0x31,0x3d,0x53,0x12,0x9c,0x9f,0x34,0x00,0x3c,0x99,0xa5,0x19,0x6a,0x8c,0x6a,0xac,0xb6,0xd6,0x4b,0x51,0xdd,0x98,0xb2,0x7c,0x5b,0x59,0xa7,0x0b,0xd9,0x41,0xa1,0xba,0x03,0x00,0xfb,0x74,0x4c,0xfc,0x49,0x9d,0x99,0x7e,0x6d,0x93,0x39,0x2d,0x28,0xa7,0x67,0xd1,0x16,0xdf,0xbc,0x2c,0xb9,0xeb,0x40,0x54,0x0d,0x11,0xeb,0x30,0x4a,0xd9,0x32,0x23,0x86,0xfd,0xc5,0x97,0xd5,0x5d,0x3d,0x1c,0x67,0xbc,0x54,0xdf,0x35,0x47,0x9a,0xfb,0x19,0xea,0x2c,0xd2,0x04,0xdd,0x33,0x1e,0xfb,0x49,0xc1,0xe1,0x72,0xf6,0xbb,0x89,0xfb,0xf5,0x82,0x07,0xdc,0xae,0x6c,0x12,0xf8,0xa7,0x59,0x8b,0xef,0x1e,0x87,0x2c,0x0c,0x35,0xf2,0x2b,0x4c,0x29,0xdf,0x10,0xf9,0xbb,0x1a,0xdd,0x3a,0xeb,0x88,0x7a,0xb5,0xfb,0x38,0xc0,0x36,0xb8,0x83,0x46,0xf7,0x61,0xc4,0x2f,0x29,0x5d,0xfe,0x0b,0x43,0x7d,0xfb,0x4f,0x30,0xa7,0x12,0x76,0xab,0x7d,0x40,0x9c,0xe4,0x24,0x96,0x3f,0x9e,0xbb,0x4f,0x1f,0x47,0xe5,0x2b,0x18,0x78,0x6f,0x27,0x9b,0x5a,0x87,0x22,0x6f,0x66,0x98,0x1d,0xd6,0xd0,0xad,0x11,0xf4,0x9a,0xf3,0x10,0x55,0xff,0x69,0x71,0x0f,0xda,0x34,0x57,0xc4,0xb7,0x85,0x2d,0xb2,0xe3,0x93,0x6d,0x07,0x78,0xbf,0x87,0x9f,0x17,0x34,0xad,0x3a,0x24,0xff,0xb1,0xae,0x95,0x84,0x76,0x0b,0x9c,0xb0,0x45,0x2a,0x53,0xba,0x09,0x62,0xff,0xe2,0xf6,0x05,0xaf,0x52,0x83,0x0b,0xd2,0x11,0xa5,0x48,0x88,0x94,0xcc,0x0b,0x05,0x22,0x55,0x04,0x87,0x11,0xcd,0x19,0x85,0x10,0xa9,0xe9,0x43,0xbf,0x8b,0x83,0x91,0x98,0x45,0x5f,0xbd,0x41,0x07,0x30,0x05,0xd3,0x03,0x99,0x0b,0x88,0xd9,0xb6,0x36,0x56,0xd4,0x3c,0xfe,0xc8,0xed,0x83,0x74,0x8f,0x4b,0x0f,0x0f,0xc5,0x12,0x02,0x16,0x79,0x4b,0x22,0xa0,0x54,0xe5,0xbc,0x58,0xab,0xd8,0xc4,0x10,0x96,0x07,0x08,0x84,0x39,0x34,0x53,0xce,0x50,0x96,0x94,0xaf,0xbe,0xab,0xe0
                        #endregion
                    };
            tcpClient.GetStream().Write(handshakeData, 0, handshakeData.Length);
        }

        //The Client (seems to?) receive a packet containing an id (?) that the client sends back, ending the handshake
        private void sendHandShakePartTwo(byte protocolVersion, byte[] data)
        {
            var memory = new MemoryStream();
            var writer = new BinaryWriter(memory);
            writer.Write(data);
            writer.Write
                (
                    new byte[]
                        {
                            #region Byte Data
                            0x03,0x00,0x00,0x00,0x00,0x00,0x89,0x14,0x00,0x00,0x00,0x00,0x02,0x00,0x07,0x63,0x6f,0x6e,0x6e,0x65,0x63,0x74,0x00,0x3f,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x03,0x61,0x70,0x70,0x02,0x00,0x03,0x61,0x70,0x70,0x00,0x04,0x74,0x79,0x70,0x65,0x02,0x00,0x0a,0x6e,0x6f,0x6e,0x70,0x72,0x69,0x76,0x61,0x74,0x65,0x00,0x08,0x66,0x6c,0x61,0x73,0x68,0x56,0x65,0x72,0x02,0x00,0x24,0x46,0x4d,0x4c,0x45,0x2f,0x33,0x2e,0x30,0x20,0x28,0x63,0x6f,0x6d,0x70,0x61,0x74,0x69,0x62,0x6c,0x65,0x3b,0x20,0x4c,0x61,0x76,0x66,0x35,0x34,0x2e,0x32,0x35,0x2e,0x31,0x30,0x30,0x29,0x00,0x05,0x74,0x63,0x55,0x72,0x6c,0x02,0x00,0x19,0x72,0x74,0x6d,0x70,0x3a,0x2f,0x2f,0x31,0x32,0x37,0x2e,0x30,0x2e,0x30,0x2e,0x31,0x3a,0x35,0x32,0xC3,0x32,0x37,0x2f,0x61,0x70,0x70,0x00,0x00,0x09
                            #endregion
                        }
                );

            var memdata = memory.ToArray();
            tcpClient.GetStream().Write(memdata, 0, memdata.Length);

            writer.Close();

            currentState = ClientStates.SendChunkSize;
        }

        private void sendChunkSize()
        {
            //somewhere in here contains the livestream id
            var data = new byte[]
                           {
                               #region Data Array
                               0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x01,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00,
                               0x43, 0x00, 0x00, 0x00, 0x00, 0x00, 0x49, 0x14,
                               0x02, 0x00, 0x0d, 0x72, 0x65, 0x6c, 0x65, 0x61,
                               0x73, 0x65, 0x53, 0x74, 0x72, 0x65, 0x61, 0x6d,
                               0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x05, 0x02, 0x00, 0x2c, 0x6c, 0x69, 0x76,
                               0x65, 0x5f, 0x33, 0x38, 0x32, 0x37, 0x35, 0x37,
                               0x37, 0x39, 0x5f, 0x31, 0x73, 0x50, 0x54, 0x5a,
                               0x64, 0x6a, 0x35, 0x5a, 0x6d, 0x34, 0x78, 0x59,
                               0x4d, 0x7a, 0x46, 0x43, 0x70, 0x59, 0x49, 0x4f,
                               0x31, 0x34, 0x33, 0x33, 0x77, 0x34, 0x68, 0x67,
                               0x4c, 0x43, 0x00, 0x00, 0x00, 0x00, 0x00, 0x45,
                               0x14, 0x02, 0x00, 0x09, 0x46, 0x43, 0x50, 0x75,
                               0x62, 0x6c, 0x69, 0x73, 0x68, 0x00, 0x40, 0x08,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x02,
                               0x00, 0x2c, 0x6c, 0x69, 0x76, 0x65, 0x5f, 0x33,
                               0x38, 0x32, 0x37, 0x35, 0x37, 0x37, 0x39, 0x5f,
                               0x31, 0x73, 0x50, 0x54, 0x5a, 0x64, 0x6a, 0x35,
                               0x5a, 0x6d, 0x34, 0x78, 0x59, 0x4d, 0x7a, 0x46,
                               0x43, 0x70, 0x59, 0x49, 0x4f, 0x31, 0x34, 0x33,
                               0x33, 0x77, 0x34, 0x68, 0x67, 0x4c, 0x43, 0x00,
                               0x00, 0x00, 0x00, 0x00, 0x19, 0x14, 0x02, 0x00,
                               0x0c, 0x63, 0x72, 0x65, 0x61, 0x74, 0x65, 0x53,
                               0x74, 0x72, 0x65, 0x61, 0x6d, 0x00, 0x40, 0x10,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05
                               #endregion
                           };
            tcpClient.GetStream().Write(data, 0, data.Length);
            currentState = ClientStates.Publish;
        }

        private void publishFunction()
        {
            //somewhere in here contains the livestream id
            byte[] data =
                {
                    0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4a, 0x14,
                    0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x07, 0x70,
                    0x75, 0x62, 0x6c, 0x69, 0x73, 0x68, 0x00, 0x40,
                    0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05,
                    0x02, 0x00, 0x2c, 0x6c, 0x69, 0x76, 0x65, 0x5f,
                    0x33, 0x38, 0x32, 0x37, 0x35, 0x37, 0x37, 0x39,
                    0x5f, 0x31, 0x73, 0x50, 0x54, 0x5a, 0x64, 0x6a,
                    0x35, 0x5a, 0x6d, 0x34, 0x78, 0x59, 0x4d, 0x7a,
                    0x46, 0x43, 0x70, 0x59, 0x49, 0x4f, 0x31, 0x34,
                    0x33, 0x33, 0x77, 0x34, 0x68, 0x67, 0x4c, 0x02,
                    0x00, 0x04, 0x6c, 0x69, 0x76, 0x65
                };
            tcpClient.GetStream().Write(data, 0, data.Length);
            currentState = ClientStates.SendSettings;
        }

        public bool sendTestMedia()
        {
            if (currentState != ClientStates.InProgress) return false;
            var data = new byte[]
                           {
                               0xe7, 0xd4, 0xc9, 0x7d, 0x1e, 0x25, 0x0c, 0x48,
                               0x4a, 0x46, 0x27, 0x19, 0xf7, 0x00, 0xff, 0xb6,
                               0x26, 0xa2, 0x00, 0x61, 0xe8, 0x0d, 0xd4, 0x5b,
                               0x82, 0xe8, 0x55, 0xcc, 0x1a, 0xbc, 0x78, 0xdb,
                               0xcb, 0x7c, 0x72, 0x61, 0x33, 0x72, 0x00, 0xd9,
                               0xb5, 0xc7, 0x68, 0xb8, 0xfc, 0x66, 0x99, 0x62,
                               0x44, 0xa7, 0x13, 0xca, 0x5e, 0xa1, 0x4f, 0xf8,
                               0x86, 0xe2, 0xf8, 0xd1, 0x57, 0xf7, 0x7b, 0xf6,
                               0x01, 0x53, 0x18, 0x23, 0x71, 0x3f, 0xb2, 0x83,
                               0xd4, 0x78, 0x92, 0x8f, 0x83, 0xca, 0x6b, 0xe1,
                               0xeb, 0x6e, 0xf7, 0x07, 0x3b, 0xe9, 0x3e, 0xe7,
                               0xae, 0x17, 0x36, 0x56, 0x1e, 0xd6, 0x93, 0xb6,
                               0xf3, 0xa1, 0xdf, 0x48, 0x76, 0x51, 0x62, 0x86,
                               0xa1, 0xf3, 0xd3, 0x4b, 0xfc, 0xee, 0x41, 0xf2,
                               0xbf, 0xff, 0xf3, 0x69, 0x91, 0xf3, 0xcb, 0x5a,
                               0x9b, 0xe5, 0xda, 0x9b, 0xda, 0xec, 0x23, 0xfe,
                               0x24, 0x74, 0xa9, 0x64, 0x12, 0x99, 0xcc, 0xff,
                               0x76, 0xac, 0x56, 0x74, 0x39, 0x41, 0x42, 0x31,
                               0x7a, 0xa9, 0x76, 0xc2, 0x0e, 0xce, 0xda, 0x08,
                               0x0e, 0x40, 0x93, 0x3b, 0x95, 0x38, 0x30, 0x46,
                               0x87, 0x47, 0xcd, 0x9b, 0x39, 0xea, 0xbd, 0x12,
                               0x46, 0x33, 0xd7, 0x97, 0xb2, 0x5f, 0x4d, 0x76,
                               0xaf, 0x8b, 0xa6, 0x55, 0x51, 0xb0, 0xb8, 0x74,
                               0x70, 0xc7, 0x1e, 0x4f, 0xeb, 0x78, 0x7b, 0x11,
                               0xea, 0xe7, 0xc4, 0xe4, 0x0e, 0x95, 0xef, 0x09,
                               0xeb, 0x4d, 0xd9, 0x1a, 0x1d, 0xdc, 0x62, 0x64,
                               0xd6, 0x68, 0x16, 0x90, 0x09, 0xe6, 0x7a, 0xee,
                               0x63, 0x0d, 0xde, 0x08, 0xa6, 0x87, 0xdc, 0x86,
                               0x24, 0x01, 0x7b, 0x7a, 0xc2, 0x1b, 0x7c, 0x5a,
                               0x36, 0x46, 0xab, 0x5e, 0xeb, 0x7d, 0x5a, 0x2c,
                               0x2f, 0xfe, 0x83, 0x61, 0x97, 0xd1, 0x40, 0xda,
                               0x02, 0x1e, 0xed, 0x70, 0xc1, 0xe5, 0xd5, 0x6d,
                               0x5f, 0x98, 0x67, 0x23, 0xc4, 0x0d, 0x7d, 0xe2,
                               0x16, 0x10, 0x58, 0x5f, 0xa6, 0x33, 0xcb, 0x3d,
                               0x9f, 0x8a, 0x22, 0xcb, 0x99, 0x81, 0xfa, 0x36,
                               0x0a, 0xf3, 0xb3, 0xae, 0xd0, 0x72, 0x42, 0xab,
                               0x2b, 0x9b, 0xd8, 0xd5, 0x5a, 0xc2, 0x56, 0x27,
                               0xa0, 0x76, 0xbc, 0x6f, 0xfe, 0x39, 0x47, 0x36,
                               0x3f, 0x50, 0x5c, 0x57, 0x86, 0xd9, 0xfc, 0x0d,
                               0x7f, 0x0c, 0x59, 0x8d, 0xcb, 0x96, 0xd1, 0xf0,
                               0x0e, 0x30, 0x0f, 0x4e, 0x46, 0xa8, 0xee, 0x56,
                               0xe5, 0xc4, 0xb6, 0x49, 0xf5, 0xc9, 0x40, 0xe5,
                               0x7e, 0x58, 0x93, 0x88, 0x5b, 0xe5, 0x31, 0x9f,
                               0x31, 0xdd, 0x8b, 0x3b, 0x28, 0x66, 0xc0, 0xa7,
                               0xfe, 0xec, 0x89, 0x1e, 0xe1, 0x54, 0xe8, 0x30,
                               0xb3, 0x5f, 0x90, 0x40, 0x11, 0x5a, 0x0d, 0xc0,
                               0x26, 0xcc, 0x48, 0x86, 0x2a, 0xab, 0xed, 0x1b,
                               0xdc, 0xa5, 0x50, 0x92, 0xc2, 0xd4, 0x2b, 0xfb,
                               0xb0, 0x58, 0x8d, 0x42, 0x53, 0x49, 0xad, 0x9f,
                               0x5e, 0x8b, 0xb4, 0x68, 0x5f, 0x6a, 0xff, 0x1d,
                               0xf4, 0x6d, 0x32, 0x43, 0x54, 0xbb, 0xca, 0xa7,
                               0x39, 0x9e, 0x31, 0xd2, 0xfd, 0x2d, 0x3a, 0x90,
                               0xfb, 0x53, 0x41, 0xd6, 0x22, 0x89, 0x57, 0x61,
                               0x2d, 0x54, 0xc7, 0x9d, 0x59, 0xe4, 0x8f, 0x28,
                               0x10, 0x50, 0x24, 0x71, 0xe0, 0x90, 0xda, 0xe9,
                               0xff, 0x5b, 0x92, 0xa6, 0xf8, 0x6f, 0x46, 0x18,
                               0xa3, 0xfb, 0xdc, 0x8c, 0xec, 0x9d, 0x2c, 0x81,
                               0x83, 0x5b, 0xff, 0xe9, 0x45, 0x24, 0x30, 0xa1,
                               0x9c, 0x73, 0x74, 0x38, 0x98, 0x6a, 0xfc, 0xec,
                               0x45, 0x8f, 0x62, 0xfc, 0xe7, 0x37, 0x2f, 0x7a,
                               0xdd, 0x3f, 0x74, 0xd1, 0x74, 0xc4, 0x50, 0x2e,
                               0xdd, 0x60, 0x5c, 0x0e, 0x9d, 0xfb, 0x8d, 0xad,
                               0x4b, 0x3c, 0x39, 0x48, 0x83, 0xf9, 0x3a, 0x63,
                               0xf2, 0x8d, 0xb8, 0xd0, 0xea, 0xb7, 0x35, 0xe0,
                               0x91, 0x09, 0xf4, 0x69, 0x2c, 0x94, 0x59, 0xf6,
                               0x20, 0x7d, 0xfa, 0xfd, 0x2f, 0x45, 0x94, 0x67,
                               0x6f, 0xde, 0x4f, 0x73, 0x1c, 0x05, 0xd0, 0x4a,
                               0x6c, 0x5e, 0x20, 0x0b, 0x89, 0xa4, 0xf7, 0x13,
                               0xe1, 0xc4, 0x12, 0xb9, 0x4f, 0xc7, 0x13, 0xd0,
                               0x5f, 0x76, 0xc5, 0x99, 0xaf, 0x3b, 0xe6, 0x7b,
                               0x59, 0xb3, 0x1b, 0x26, 0x46, 0x65, 0x59, 0x38,
                               0xb3, 0xaa, 0xdc, 0xd6, 0xe6, 0xb5, 0x1f, 0x05,
                               0x39, 0x7f, 0x95, 0xc2, 0xd1, 0xd6, 0xb2, 0x3c,
                               0xe0, 0xd0, 0x4d, 0x6c, 0x42, 0xbc, 0xdf, 0x52,
                               0xc6, 0x9c, 0xf8, 0xaa, 0xa8, 0x2a, 0x43, 0x7f,
                               0xab, 0xbb, 0x00, 0xe3, 0xd9, 0x68, 0xc3, 0x99,
                               0x58, 0x71, 0x31, 0xc5, 0xb0, 0x49, 0x59, 0xe9,
                               0xa8, 0x43, 0x57, 0xfb, 0xe9, 0xa0, 0x70, 0xd6,
                               0xb7, 0x77, 0x0f, 0x0b, 0x7b, 0x07, 0x95, 0xc7,
                               0x08, 0xfd, 0xdb, 0x8b, 0xa4, 0x94, 0xe1, 0x79,
                               0x94, 0x36, 0xf5, 0x90, 0x10, 0x33, 0xaf, 0x82,
                               0x59, 0x79, 0x82, 0xd8, 0x85, 0x47, 0x35, 0x5f,
                               0xfb, 0x8a, 0xf6, 0xd3, 0x96, 0x2c, 0x45, 0x63,
                               0x92, 0x94, 0x56, 0x47, 0x59, 0xbf, 0xe2, 0x70,
                               0x51, 0x70, 0xbd, 0x12, 0xbe, 0xe9, 0xb3, 0xf5,
                               0x30, 0x0f, 0xfc, 0xea, 0xdf, 0x22, 0xee, 0x36,
                               0xd0, 0xfe, 0x76, 0x26, 0x94, 0xc6, 0xce, 0xce,
                               0x8b, 0x10, 0x9c, 0xd7, 0xc8, 0x93, 0x08, 0x1e,
                               0x9b, 0x3e, 0xd7, 0xa3, 0xc8, 0x36, 0x61, 0x8b,
                               0xe7, 0xea, 0xe6, 0xd3, 0x55, 0x01, 0x58, 0xc2,
                               0xd0, 0xa8, 0x97, 0x42, 0xeb, 0xab, 0xcd, 0x8a,
                               0x8a, 0x4e, 0xdf, 0xdc, 0x4a, 0x15, 0xa9, 0xf1,
                               0x4a, 0x73, 0xfe, 0x33, 0x25, 0x16, 0x05, 0xcf,
                               0x4d, 0xa1, 0x47, 0xf7, 0xff, 0x68, 0x38, 0x3a,
                               0x20, 0x3a, 0x62, 0x3f, 0x76, 0x93, 0x3f, 0xcf,
                               0x40, 0x9e, 0xc7, 0x81, 0x74, 0xb8, 0xcf, 0xb9,
                               0x64, 0xa6, 0x13, 0x6c, 0xc0, 0x06, 0x52, 0x9d,
                               0x76, 0xb7, 0x6a, 0x21, 0x7e, 0xe0, 0xf8, 0x0f,
                               0xaa, 0xa7, 0x2d, 0x96, 0xcb, 0x34, 0xcb, 0xe1,
                               0x14, 0xe1, 0xa8, 0xc7, 0xb6, 0xe0, 0xe3, 0xd6,
                               0x31, 0xfd, 0x7a, 0xd1, 0xd7, 0xe0, 0xe4, 0x79,
                               0xc7, 0xcf, 0x6f, 0xb4, 0x4e, 0xe7, 0x96, 0xf2,
                               0x4f, 0xcf, 0xbc, 0xe3, 0x8f, 0x6a, 0x63, 0xaa,
                               0x56, 0x0f, 0xf4, 0x8e, 0x82, 0x1b, 0xee, 0x3f,
                               0xc6, 0x32, 0x48, 0x48, 0xff, 0x0a, 0xed, 0xce,
                               0x3d, 0xbf, 0xfa, 0x14, 0x45, 0x31, 0x2a, 0x7a,
                               0x9e, 0x9a, 0xa6, 0x3a, 0x09, 0x3b, 0x9d, 0x48,
                               0xae, 0x7e, 0xc9, 0x8c, 0x55, 0xb8, 0xa6, 0x72,
                               0x5f, 0x96, 0xf3, 0x33, 0x2f, 0x4a, 0x3b, 0x68,
                               0x7c, 0x22, 0x22, 0xbf, 0x31, 0x5c, 0x17, 0xc6,
                               0x2d, 0x43, 0xf8, 0x8e, 0xc1, 0x89, 0x46, 0xb6,
                               0x2a, 0x03, 0x86, 0xd5, 0x23, 0x4c, 0x2b, 0xb9,
                               0xda, 0x19, 0xa2, 0x12, 0x87, 0x13, 0x7a, 0x9f,
                               0xba, 0x3d, 0xdc, 0x50, 0xb4, 0x90, 0x7b, 0x13,
                               0x73, 0xfd, 0xcb, 0x1c, 0x55, 0x5c, 0x31, 0xd8,
                               0x30, 0x4b, 0x26, 0x83, 0xc1, 0xa6, 0x3a, 0x47,
                               0x5c, 0x47, 0x48, 0x12, 0x26, 0x62, 0x8c, 0x8a,
                               0x4a, 0xcd, 0x97, 0xdf, 0x7c, 0x0d, 0x1f, 0x10,
                               0xbb, 0x7b, 0x5f, 0x02, 0xbc, 0x64, 0xb5, 0x4d,
                               0xc4, 0x9c, 0xda, 0xd4, 0x16, 0x0b, 0x8b, 0xea,
                               0x06, 0x3a, 0x57, 0x9f, 0xca, 0x5d, 0x8b, 0x6c,
                               0xbd, 0x1d, 0x8c, 0x32, 0xf9, 0xb0, 0x5b, 0xce,
                               0x4c, 0x78, 0x34, 0xcb, 0xc3, 0x78, 0x91, 0xa1,
                               0x1c, 0x6a, 0xc9, 0xe6, 0xde, 0x48, 0x57, 0x9c,
                               0x05, 0x13, 0x4f, 0x37, 0x31, 0xf6, 0xc1, 0x5f,
                               0x2a, 0xf2, 0x11, 0xcf, 0xb9, 0xf3, 0xaf, 0xdb,
                               0xd7, 0xd5, 0x3c, 0xe1, 0x8b, 0x36, 0x4d, 0x67,
                               0x97, 0x88, 0x25, 0xb4, 0x1c, 0xab, 0xe2, 0x6c
                           };
            var data2 = new byte[]
                            {
                                0x43, 0x94, 0x20, 0xc8, 0x1e, 0xaf, 0x58, 0xa5,
                                0x98, 0x94, 0xf5, 0x23, 0x82, 0xe0, 0x8a, 0x81,
                                0xc0, 0xcb, 0x86, 0x66, 0x59, 0xa2, 0x0c, 0x53,
                                0xe6, 0x0e, 0xb3, 0xab, 0x15, 0xc3, 0x14, 0x04,
                                0xd5, 0x73, 0x19, 0xbb, 0x8d, 0xa5, 0x03, 0x27,
                                0xe2, 0x1c, 0x43, 0xbd, 0x0a, 0x8d, 0x1a, 0x90,
                                0x48, 0xf9, 0xd9, 0x67, 0x7d, 0xed, 0x21, 0xa9,
                                0x1a, 0xca, 0x5c, 0x32, 0x2f, 0xcb, 0x7c, 0x15,
                                0xca, 0x8c, 0xa5, 0xd3, 0xa9, 0x7c, 0x0b, 0x89,
                                0x41, 0x0b, 0x4b, 0x1a, 0x94, 0xae, 0x74, 0x61,
                                0x2e, 0x71, 0xaf, 0x15, 0x31, 0xf9, 0xd8, 0x56,
                                0xd8, 0x24, 0xbd, 0x9b, 0x39, 0xa7, 0x91, 0x40,
                                0x60, 0xd0, 0x6f, 0x83, 0x55, 0x90, 0x79, 0x4b,
                                0x7d, 0x8d, 0xb2, 0xb0, 0xc7, 0xbc, 0xef, 0xe7,
                                0x44, 0x6f, 0xe5, 0x82, 0xb3, 0x05, 0xa0, 0x77,
                                0x4a, 0x75, 0x4a, 0xe1, 0x0b, 0xa4, 0x41, 0x7b,
                                0x35, 0xe1, 0x72, 0x8b, 0xa0, 0xa8, 0x25, 0x21,
                                0xd9, 0x62, 0x47, 0x52, 0xb4, 0xc6, 0x18, 0xa3,
                                0x61, 0x15, 0x30, 0xc7, 0x5d, 0x8a, 0x99, 0x44,
                                0x00, 0x00, 0x28, 0x00, 0x00, 0x1a, 0x09, 0x27,
                                0x01, 0x00, 0x00, 0xc8, 0x00, 0x00, 0x00, 0x11,
                                0x41, 0x9a, 0x24, 0x18, 0x84, 0x7f, 0xfa, 0x58,
                                0x0a, 0x45, 0xe1, 0x60, 0x26, 0x12, 0x8f, 0x86,
                                0x98, 0x44, 0x00, 0x00, 0x11, 0x00, 0x01, 0x9d,
                                0x08, 0xaf, 0x01, 0xde, 0x02, 0x00, 0x4c, 0x61,
                                0x76, 0x63, 0x35, 0x34, 0x2e, 0x35, 0x33, 0x2e,
                                0x31, 0x30, 0x30, 0x00, 0x42, 0x38, 0x07, 0x20,
                                0x0d, 0xa6, 0x12, 0x8c, 0x18, 0x80, 0x00, 0x00,
                                0x00, 0x00, 0x00, 0x0d, 0x0e, 0xfe, 0x19, 0x8e,
                                0x6e, 0x6d, 0xa1, 0xb3, 0xf2, 0x84, 0x05, 0x37,
                                0xd1, 0xd4, 0xe1, 0xa5, 0x33, 0xc1, 0x04, 0xc8,
                                0x21, 0x32, 0x15, 0x10, 0x2c, 0x22, 0xef, 0xd4,
                                0xed, 0x28, 0x77, 0x13, 0x67, 0x77, 0x0c, 0x4c,
                                0x18, 0x71, 0xe4, 0x10, 0x41, 0xea, 0x01, 0x12,
                                0x7f, 0xf8, 0x6c, 0x73, 0xe5, 0xc7, 0x47, 0x1c,
                                0xb2, 0xe8, 0x10, 0x83, 0xc7, 0x60, 0x84, 0x1e,
                                0x1f, 0x17, 0xdb, 0xcb, 0x00, 0x0f, 0x6e, 0x52,
                                0x36, 0xfe, 0x38, 0x01, 0xc3, 0xea, 0x08, 0xb6,
                                0x60, 0xc1, 0xc8, 0x0c, 0x16, 0x77, 0x82, 0x81,
                                0x8b, 0x52, 0x29, 0x8a, 0x89, 0x35, 0xe5, 0x04,
                                0x0a, 0xae, 0x02, 0x19, 0x02, 0x9d, 0xde, 0xd6,
                                0xcb, 0xb6, 0x92, 0x0b, 0xc3, 0xdc, 0x8b, 0x78,
                                0x60, 0xdc, 0x06, 0x1b, 0x6e, 0xbb, 0x80, 0x6d,
                                0x83, 0x43, 0x7c, 0x3e, 0x4a, 0x20, 0x9c, 0x6f,
                                0xa7, 0x37, 0x68, 0x7c, 0xb6, 0x94, 0xfc, 0xf3,
                                0xc7, 0x69, 0x5f, 0x9a, 0x90, 0x7c, 0xa2, 0x1b,
                                0x60, 0x5f, 0x6a, 0xdb, 0x4f, 0x97, 0x6f, 0xe9,
                                0x0f, 0x98, 0xa5, 0x73, 0xf4, 0xd1, 0x7a, 0x40,
                                0xd1, 0xfb, 0x0d, 0x3b, 0x61, 0x70, 0x2a, 0xb9,
                                0xf9, 0xf0, 0x1f, 0x70, 0x68, 0xdf, 0x7d, 0x50,
                                0x94, 0x5f, 0x37, 0xc8, 0x14, 0xeb, 0xa2, 0xa0,
                                0x46, 0xe0, 0x72, 0x00
                            };
            var memory = new MemoryStream();
            var writer = new BinaryWriter(memory);
            writer.Write(data);
            writer.Write(data2);
            tcpClient.GetStream().Write(memory.ToArray(), 0, memory.ToArray().Length);
            writer.Close();

            return true;
        }

        public void sendTestMedia2()
        {
            if (currentState != ClientStates.InProgress) return;
            var data = new byte[]
                           {
                               0xda, 0x61, 0x28, 0x81, 0xa8, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x00, 0xec, 0x77, 0xf0, 0xcc, 0x73,
                               0x73, 0x72, 0xa6, 0xcf, 0xca, 0x10, 0x94, 0xdf,
                               0x47, 0x53, 0x86, 0x94, 0xcf, 0x04, 0x13, 0x20,
                               0x84, 0xc8, 0x54, 0x40, 0xb0, 0x8b, 0xbf, 0x53,
                               0xb4, 0xa1, 0xc0, 0x9b, 0x1b, 0xb8, 0x62, 0x62,
                               0x6b, 0xab, 0x90, 0x41, 0x07, 0xa8, 0x04, 0x49,
                               0xff, 0xe1, 0xb1, 0xcf, 0xc3, 0x1d, 0x1c, 0x72,
                               0xcb, 0xa0, 0x42, 0x0f, 0x1d, 0x82, 0x10, 0x78,
                               0x7c, 0x5f, 0x6f, 0x2c, 0x00, 0x3d, 0xbc, 0x72,
                               0xb7, 0xe3, 0xc0, 0x0e, 0x1f, 0x50, 0x45, 0xf4,
                               0x81, 0x95, 0xc0, 0x24, 0x6e, 0xca, 0x10, 0x50,
                               0x62, 0xd4, 0x96, 0x11, 0xa9, 0xd1, 0x0b, 0x58,
                               0x81, 0xa7, 0xff, 0xfe, 0x14, 0x06, 0x86, 0x8d,
                               0xbb, 0x74, 0xfc, 0x9f, 0x96, 0x8e, 0x16, 0xd1,
                               0xb6, 0xda, 0x2f, 0xa5, 0x6d, 0xb4, 0x68, 0x6f,
                               0x81, 0xb6, 0x90, 0x4d, 0xa5, 0x0e, 0xdd, 0x7f,
                               0xc7, 0xcc, 0xa7, 0xe7, 0xf8, 0xc7, 0xee, 0x69,
                               0xf9, 0xc2, 0x99, 0x9f, 0x28, 0xd0, 0x52, 0x03,
                               0x68, 0x3e, 0x5a, 0x36, 0xf5, 0xf9, 0x91, 0xda,
                               0xef, 0xa3, 0x45, 0xf6, 0xc0, 0xd1, 0xb7, 0x49,
                               0xf1, 0xdb, 0x06, 0x99, 0x01, 0x73, 0xaf, 0x0b,
                               0x19, 0x81, 0xa2, 0xf7, 0xd4, 0xcf, 0x17, 0xcd,
                               0xf2, 0x0b, 0x52, 0x1a, 0x3e, 0x40, 0x68, 0xbd,
                               0x44, 0xf8, 0x44, 0x00, 0x00, 0x17, 0x00, 0x00,
                               0x11, 0x09, 0x27, 0x01, 0x00, 0x00, 0x50, 0x00,
                               0x00, 0x00, 0x08, 0x41, 0x9e, 0x42, 0x42, 0x11,
                               0xff, 0x06, 0xc5, 0x44, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0xd6, 0x08, 0xaf, 0x01, 0x21, 0x1c, 0x03,
                               0xf8, 0x8a, 0x0f, 0x64, 0x63, 0xa1, 0x44, 0xa1,
                               0x24, 0xb9, 0x92, 0x98, 0x6b, 0x4b, 0xce, 0x25,
                               0x81, 0xbc, 0xaa, 0xa0, 0xa9, 0x50, 0x2a, 0x06,
                               0xca, 0xa1, 0x35, 0x31, 0x47, 0xe1, 0x65, 0x6a,
                               0xef, 0x41, 0x45, 0x29, 0x50, 0x06, 0x5c, 0x24,
                               0x0f, 0x2b, 0x83, 0xc3, 0xdc, 0x67, 0x2f, 0x96,
                               0xf1, 0x89, 0x06, 0x0f, 0x1a, 0x13, 0xc2, 0x46,
                               0x47, 0xe5, 0x4d, 0xa4, 0xde, 0xda, 0xe7, 0x90,
                               0x96, 0x0e, 0xaa, 0x72, 0x4b, 0xaf, 0xd5, 0xf0,
                               0x88, 0x20, 0xfb, 0x2b, 0xd0, 0xfa, 0xde, 0xab,
                               0x7e, 0x11, 0x8d, 0xff, 0x31, 0x13, 0xda, 0xb2,
                               0x1e, 0x27, 0xce, 0x75, 0xeb, 0x09, 0x68, 0xb7,
                               0xd0, 0xa5, 0xa1, 0x54, 0x00, 0x39, 0x00, 0xfe,
                               0x22, 0x83, 0xd9, 0x18, 0xe8, 0x51, 0x28, 0x49,
                               0x2e, 0x64, 0xa6, 0x1a, 0xd2, 0xf3, 0x89, 0x60,
                               0x6f, 0x2a, 0xa8, 0x2a, 0x52, 0x95, 0x03, 0x65,
                               0x50, 0x9a, 0x98, 0xa3, 0xf0, 0xb2, 0xb5, 0x77,
                               0xa0, 0xa5, 0x14, 0xf0, 0x03, 0x2e, 0x32, 0x07,
                               0x95, 0xc1, 0xe1, 0xee, 0x33, 0x97, 0xcb, 0x78,
                               0xc4, 0x83, 0x01, 0x8d, 0x09, 0xe1, 0x22, 0x23,
                               0xf2, 0xa6, 0xd2, 0x6f, 0x6d, 0x74, 0x48, 0x52,
                               0xc5, 0xf5, 0x53, 0x94, 0x5d, 0xc7, 0x7e, 0xfb,
                               0xe2, 0x08, 0x3e, 0x15, 0x99, 0x2f, 0xad, 0xea,
                               0xb7, 0xf0, 0xb2, 0xfa, 0xfe, 0x7c, 0x80, 0xf9,
                               0x15, 0xd0, 0xdc, 0xf9, 0xce, 0xbd, 0xe1, 0x2d,
                               0x12, 0xdc, 0x52, 0xd0, 0xaa, 0x00, 0x15, 0x03,
                               0x80, 0x44, 0x00, 0x00, 0x17, 0x00, 0x00, 0xe4,
                               0x08, 0xaf, 0x01, 0x21, 0x1c, 0x03, 0xfa, 0x8e,
                               0x8e, 0xc2, 0xb1, 0x32, 0xc8, 0x81, 0x35, 0xd4,
                               0x9b, 0xbc, 0x2e, 0xab, 0x8e, 0xb7, 0xc4, 0xb0,
                               0x33, 0x2a, 0x81, 0x07, 0xad, 0x99, 0xb0, 0xcd,
                               0xcd, 0x5a, 0x36, 0xe8, 0x23, 0x55, 0x65, 0x49,
                               0x38, 0x6c, 0xde, 0x2d, 0x57, 0xe1, 0x2e, 0x8f,
                               0x9a, 0x8b, 0x2a, 0x48, 0x86, 0x96, 0x53, 0xf5,
                               0xd5, 0x16, 0x4b, 0x56, 0x4d, 0x56, 0x1b, 0x72,
                               0xdd, 0x1b, 0x54, 0xf6, 0x53, 0xb6, 0xe1, 0xa7,
                               0x53, 0xc2, 0x5d, 0x73, 0x18, 0xba, 0xcd, 0x3b,
                               0xbf, 0x67, 0x81, 0xcb, 0x4b, 0xc4, 0x96, 0xbf,
                               0x2a, 0x8a, 0xaa, 0x9a, 0x59, 0x2d, 0x50, 0x75,
                               0x1a, 0xc0, 0x05, 0x5d, 0x6e, 0x6f, 0x9b, 0x8f,
                               0xea, 0x55, 0xe1, 0x83, 0x92, 0x7e, 0x69, 0x5c,
                               0xc6, 0x61, 0xc3, 0x09, 0x21, 0x20, 0x3f, 0xa8,
                               0xe8, 0xec, 0x2b, 0x13, 0x2c, 0x48, 0x13, 0x5d,
                               0x49, 0xbb, 0xc2, 0xf1, 0xc7, 0x5b, 0xe2, 0x58,
                               0x19, 0x99, 0x40, 0x83, 0xd6, 0xcc, 0xd8, 0x66,
                               0xe6, 0xad, 0x1b, 0x74, 0x11, 0xaa, 0xb2, 0xab,
                               0xce, 0x1b, 0x37, 0x8b, 0x54, 0xb8, 0x4b, 0xa3,
                               0xe6, 0xa2, 0xca, 0x92, 0x21, 0xa5, 0x94, 0x3d,
                               0x72, 0xc5, 0x92, 0xd5, 0x93, 0x55, 0x87, 0x3c,
                               0xb9, 0x46, 0xd5, 0x3d, 0x94, 0xed, 0x9d, 0xe9,
                               0x91, 0xe1, 0x3b, 0xe1, 0x94, 0x5c, 0xda, 0x77,
                               0x7f, 0x1d, 0x07, 0x2d, 0x2f, 0x74, 0x97, 0x0f,
                               0x29, 0x4a, 0x5a, 0x9a, 0x59, 0x2d, 0x52, 0x73,
                               0x1a, 0xcd, 0x85, 0x5d, 0x61, 0xbf, 0x5c, 0x78,
                               0xb6, 0xdf, 0xee, 0x9b, 0x34, 0xbf, 0xc2, 0xd0,
                               0x8a, 0x84, 0x24, 0x91, 0xc0, 0x44, 0x00, 0x00,
                               0x11, 0x00, 0x00, 0x11, 0x09, 0x27, 0x01, 0x00,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x01, 0x9e,
                               0x61, 0x44, 0x23, 0xff, 0x06, 0xc4, 0x44, 0x00,
                               0x00, 0x06, 0x00, 0x01, 0x1c, 0x08, 0xaf, 0x01,
                               0x21, 0x1c, 0x03, 0xe0, 0x8a, 0x9e, 0xc7, 0x42,
                               0x89, 0x81, 0xad, 0x78, 0xe3, 0xaf, 0x91, 0xf5,
                               0xee, 0xa9, 0xf7, 0xf1, 0xe6, 0xc0, 0x15, 0x55,
                               0x55, 0x40, 0x6a, 0x0d, 0x79, 0xcc, 0xde, 0x58,
                               0x24, 0x5a, 0xcb, 0x31, 0x26, 0xbf, 0xef, 0x52,
                               0x37, 0xf0, 0xa5, 0x86, 0x40, 0xc4, 0x44, 0xbf,
                               0x05, 0xcb, 0x85, 0x25, 0x11, 0x0a, 0x25, 0x01,
                               0xea, 0x8e, 0xe0, 0x8c, 0x31, 0x2c, 0x73, 0xd9,
                               0xd6, 0x07, 0xdc, 0xdd, 0x1d, 0x37, 0x38, 0x1d,
                               0xd4, 0xc9, 0xa7, 0x4b, 0x28, 0xe7, 0x16, 0x3c,
                               0xf8, 0xbf, 0x7f, 0x74, 0xd7, 0x5e, 0x8a, 0xb1,
                               0x3e, 0x79, 0xb5, 0x76, 0xa5, 0x14, 0xbe, 0x9a,
                               0xce, 0xe1, 0x57, 0xf7, 0x80, 0x5a, 0xfb, 0xe8,
                               0x02, 0x1e, 0x3d, 0x92, 0xba, 0x58, 0x89, 0x77,
                               0x24, 0xaf, 0x73, 0x99, 0xea, 0x8c, 0xbf, 0xb4,
                               0x45, 0x70, 0x83, 0x09, 0x72, 0xb1, 0x9a, 0x36,
                               0x64, 0xed, 0x6e, 0xd0, 0xa4, 0xc2, 0xf7, 0x2a,
                               0x27, 0xa5, 0x69, 0x00, 0x00, 0x10, 0x13, 0x3e,
                               0x08, 0xa9, 0x6c, 0xb4, 0x28, 0x98, 0x1a, 0xd7,
                               0x8e, 0x3a, 0xf9, 0x1f, 0x5e, 0xea, 0x9f, 0x5d,
                               0xf5, 0xa0, 0x06, 0x55, 0x2a, 0x80, 0xd4, 0x1a,
                               0xf3, 0x99, 0xbc, 0xb0, 0x48, 0xb5, 0xb6, 0x62,
                               0x4d, 0x7f, 0xde, 0xa4, 0x6f, 0xe1, 0x4b, 0x0c,
                               0x81, 0x88, 0x89, 0x7e, 0x0b, 0x97, 0x0a, 0x4a,
                               0x36, 0x4d, 0x21, 0xdd, 0xe9, 0xb7, 0x5e, 0x7d,
                               0xd3, 0xc2, 0x77, 0xff, 0x76, 0xee, 0x6e, 0x8e,
                               0x9b, 0x9c, 0x0e, 0xea, 0x64, 0xfc, 0x69, 0x99,
                               0x47, 0x38, 0xb0, 0x67, 0xa5, 0xfb, 0xf0, 0x9a,
                               0x2c, 0x41, 0x32, 0x9f, 0x3b, 0x1a, 0xdb, 0x51,
                               0xa9, 0x7d, 0x36, 0xdf, 0x70, 0xab, 0x8d, 0x01,
                               0x6b, 0xef, 0xa8, 0x00, 0x7d, 0x2c, 0xa8, 0x6c,
                               0x51, 0x03, 0x77, 0x20, 0xd7, 0xb9, 0xcc, 0xf5,
                               0x5e, 0xde, 0x92, 0x2b, 0x32, 0x60, 0x4e, 0x56,
                               0x13, 0xbf, 0x42, 0xcb, 0x76, 0x50, 0x29, 0x7e,
                               0xea, 0xd4, 0x94, 0xf4, 0xac, 0x00, 0x05, 0xc9,
                               0xa0, 0x0e, 0x44, 0x00, 0x00, 0x18, 0x00, 0x00,
                               0xdd, 0x08, 0xaf, 0x01, 0x21, 0x1c, 0x03, 0xf0,
                               0x0a, 0x10, 0xcd, 0x42, 0x88, 0xc2, 0x35, 0x73,
                               0x69, 0x5c, 0x39, 0x4f, 0x35, 0xec, 0x00, 0xca
                           };
            var data2 = new byte[]
                            {
                                0xaa, 0xa0, 0x1a, 0x87, 0xcb, 0x4e, 0x29, 0xa3,
                                0x41, 0x25, 0xf6, 0x78, 0x37, 0xaf, 0x53, 0x8a,
                                0xec, 0xcf, 0x48, 0xb0, 0xe8, 0x01, 0x30, 0xc5,
                                0x19, 0x72, 0xe3, 0x7b, 0x78, 0x33, 0x7c, 0x38,
                                0x51, 0x6e, 0x3f, 0x95, 0xb6, 0xb7, 0xfe, 0xb5,
                                0x16, 0x31, 0x99, 0xc4, 0x8f, 0x2a, 0x12, 0x5d,
                                0x22, 0x29, 0x39, 0x58, 0x8b, 0x61, 0x16, 0x5e,
                                0x93, 0x70, 0x49, 0x46, 0xd7, 0xda, 0xc3, 0xa8,
                                0xee, 0xdd, 0xce, 0x2d, 0x93, 0xf3, 0x79, 0x0f,
                                0x34, 0xc5, 0x92, 0xb3, 0x85, 0xde, 0xce, 0x11,
                                0x14, 0x16, 0x49, 0xb1, 0x59, 0x39, 0x08, 0x11,
                                0x00, 0x85, 0x80, 0x7e, 0x01, 0x41, 0xd9, 0xc8,
                                0x51, 0x18, 0x46, 0xae, 0x6d, 0x2b, 0x53, 0x94,
                                0xf3, 0x5e, 0xc0, 0x0c, 0xaa, 0xaa, 0x01, 0xa8,
                                0x2c, 0xb4, 0xe2, 0x9a, 0x34, 0x12, 0x5f, 0x67,
                                0x83, 0x7b, 0x86, 0x51, 0x5d, 0x99, 0xe9, 0x16,
                                0x1d, 0x00, 0x26, 0x18, 0xa3, 0x2e, 0x5c, 0x6f,
                                0x6f, 0x06, 0x6f, 0x86, 0xa9, 0xad, 0xc7, 0xb9,
                                0x6d, 0xad, 0xff, 0xad, 0x45, 0x8c, 0x66, 0xd1,
                                0x23, 0xe6, 0x84, 0x97, 0x48, 0x8a, 0x4e, 0x56,
                                0x22, 0xde, 0x45, 0x97, 0xa4, 0xdc, 0xd2, 0x51,
                                0xb8, 0xed, 0x61, 0xca, 0xdd, 0xaa, 0xe3, 0x48,
                                0x9f, 0x41, 0xf1, 0x75, 0x56, 0x26, 0xc2, 0x53,
                                0x85, 0xde, 0xce, 0x11, 0x14, 0x16, 0x49, 0xb1,
                                0x59, 0x39, 0x31, 0x10, 0x05, 0x80, 0xe0, 0x44,
                                0x00, 0x00, 0x0a, 0x00, 0x00, 0x11, 0x09, 0x27,
                                0x01, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x08,
                                0x01, 0x9e, 0x63, 0x44, 0x23, 0xff, 0x06, 0xc5,
                                0x44, 0x00, 0x00, 0x0d, 0x00, 0x01, 0x07, 0x08,
                                0xaf, 0x01, 0x21, 0x1c, 0x03, 0xe3, 0x8e, 0x28,
                                0x85, 0x12, 0x04, 0x1c, 0x7a, 0xeb, 0x2b, 0x3a,
                                0xe4, 0xae, 0x3e, 0xbc, 0x5f, 0x00, 0x05, 0x55,
                                0x50, 0x4a, 0x0e, 0xfc, 0x37, 0x17, 0x99, 0x4e,
                                0x74, 0x59, 0x8a, 0xab, 0x4e, 0x7f, 0x51, 0xe5,
                                0x39, 0x0a, 0x56, 0x61, 0x38, 0x4c, 0x4c, 0xc5,
                                0xef, 0xe4, 0x28, 0x08, 0xdb, 0x20, 0x4b, 0x36,
                                0x85, 0xc9, 0xb8, 0x6a, 0x94, 0x03, 0xef, 0xac,
                                0xe0, 0xa1, 0x80, 0xc1, 0x92, 0x4a, 0x2f, 0x98,
                                0x48, 0x1a, 0xa5, 0xa6, 0x82, 0x20, 0xbc, 0x35,
                                0x00, 0x00, 0x00, 0x91, 0x84, 0x39, 0x90, 0x18,
                                0x0b, 0x7b, 0xdb, 0xa6, 0xf0, 0x07, 0xd3, 0x31,
                                0xfc, 0x86, 0x23, 0x1b, 0x03, 0x76, 0x18, 0xe6,
                                0x3a, 0xac, 0x78, 0x69, 0x0b, 0xb1, 0xd5, 0x6b,
                                0x0a, 0x63, 0xfd, 0xd3, 0x2e, 0x06, 0xcd, 0x91,
                                0xfb, 0x6c, 0xbc, 0xe3, 0x1b, 0xa8, 0x0a, 0xa6,
                                0x8d, 0xcb, 0x54, 0x3e, 0x38, 0xe2, 0x88, 0x61,
                                0x28, 0x39, 0xc7, 0xae, 0xb2, 0xb3, 0xae, 0x4a,
                                0xe3, 0xeb, 0xc5, 0xf0, 0x00, 0x55, 0x55, 0x28,
                                0x25, 0x81, 0xdf, 0x86, 0xe2, 0xf3, 0x29, 0xce,
                                0x8b, 0x31, 0x55, 0x69, 0xcf, 0xea, 0x3c, 0xa7,
                                0x21, 0x4a, 0xcc, 0x27, 0x09, 0x89, 0xa8, 0x5e,
                                0xfe, 0x41, 0xc0, 0x8d
                            };

            var memory = new MemoryStream();
            var writer = new BinaryWriter(memory);
            writer.Write(data);
            writer.Write(data2);
            tcpClient.GetStream().Write(memory.ToArray(), 0, memory.ToArray().Length);
            writer.Close();
        }

        private void sendStreamSettings()
        {
            //this sends things like video size, frame rate, audio rate, etc
            var data = new byte[]
                           {
                               0x04, 0x00, 0x00, 0x00, 0x00, 0x01, 0x35, 0x12,
                               0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x0d, 0x40,
                               0x73, 0x65, 0x74, 0x44, 0x61, 0x74, 0x61, 0x46,
                               0x72, 0x61, 0x6d, 0x65, 0x02, 0x00, 0x0a, 0x6f,
                               0x6e, 0x4d, 0x65, 0x74, 0x61, 0x44, 0x61, 0x74,
                               0x61, 0x08, 0x00, 0x00, 0x00, 0x0d, 0x00, 0x08,
                               0x64, 0x75, 0x72, 0x61, 0x74, 0x69, 0x6f, 0x6e,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x05, 0x77, 0x69, 0x64, 0x74, 0x68,
                               0x00, 0x40, 0x59, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x06, 0x68, 0x65, 0x69, 0x67, 0x68,
                               0x74, 0x00, 0x40, 0x59, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x00, 0x0d, 0x76, 0x69, 0x64, 0x65,
                               0x6f, 0x64, 0x61, 0x74, 0x61, 0x72, 0x61, 0x74,
                               0x65, 0x00, 0x40, 0x86, 0xe3, 0x60, 0x00, 0x00,
                               0x00, 0x00, 0x00, 0x09, 0x66, 0x72, 0x61, 0x6d,
                               0x65, 0x72, 0x61, 0x74, 0x65, 0x00, 0x40, 0x8f,
                               0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c,
                               0x76, 0x69, 0x64, 0x65, 0x6f, 0x63, 0x6f, 0x64,
                               0x65, 0x63, 0x69, 0x64, 0x00, 0x40, 0x1c, 0x00,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0d, 0x61,
                               0x75, 0x64, 0x69, 0x6f, 0x64, 0x61, 0x74, 0x61,
                               0x72, 0x61, 0x74, 0x65, 0x00, 0x40, 0x6f, 0x40,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x61,
                               0x75, 0x64, 0x69, 0x6f, 0x73, 0x61, 0x6d, 0x70,
                               0x6c, 0x65, 0x72, 0x61, 0x74, 0x65, 0x00, 0x40,
                               0xe5, 0x88, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x0f, 0x61, 0x75, 0x64, 0x69, 0x6f, 0x73, 0x61,
                               0x6d, 0x70, 0x6c, 0x65, 0x73, 0x69, 0x7a, 0x65,
                               0x00, 0x40, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x06, 0x73, 0x74, 0x65, 0x72, 0x65,
                               0x6f, 0x01, 0x01, 0x00, 0x0c, 0x61, 0x75, 0x64,
                               0x69, 0x6f, 0x63, 0x6f, 0x64, 0x65, 0x63, 0x69,
                               0x64, 0x00, 0x40, 0x24, 0x00, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x00, 0x07, 0x65, 0x6e, 0x63, 0x6f,
                               0x64, 0x65, 0x72, 0x02, 0x00, 0x0d, 0x4c, 0x61,
                               0x76, 0x66, 0x35, 0x34, 0x2e, 0x32, 0x35, 0x2e,
                               0x31, 0x30, 0x30, 0x00, 0x08, 0x66, 0x69, 0x6c,
                               0x65, 0x73, 0x69, 0x7a, 0x65, 0x00, 0x00, 0x00,
                               0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                               0x09, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c,
                               0x09, 0x01, 0x00, 0x00, 0x00, 0x17, 0x00, 0x00,
                               0x00, 0x00, 0x01, 0x64, 0x00, 0x14, 0xff, 0xe1,
                               0x00, 0x18, 0x67, 0x64, 0x00, 0x14, 0xac, 0xd9,
                               0x47, 0x3f, 0x9e, 0x78, 0x40, 0x00, 0x00, 0x03,
                               0x00, 0x40, 0x00, 0x00, 0x0c, 0x83, 0xc5, 0x0a,
                               0x65, 0x80, 0x01, 0x00, 0x04, 0x68, 0xef, 0xbc,
                               0xb0, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07,
                               0x08, 0x01, 0x00, 0x00, 0x00, 0xaf, 0x00, 0x12,
                               0x10, 0x56, 0xe5, 0x00, 0x04, 0x00, 0x00, 0x00,
                               0x00, 0x08, 0x9b, 0x09, 0x01, 0x00, 0x00, 0x00,
                               0x17, 0x01, 0x00, 0x00, 0x50, 0x00, 0x00, 0x02,
                               0xdd, 0x06, 0x05, 0xff, 0xff, 0xd9, 0xdc, 0x45,
                               0xe9, 0xbd, 0xe6, 0xd9, 0x48, 0xb7, 0x96, 0x2c,
                               0xd8, 0x20, 0xd9, 0x23, 0xee, 0xef, 0x78, 0x32,
                               0x36, 0x34, 0x20, 0x2d, 0x20, 0x63, 0x6f, 0x72,
                               0x65, 0x20, 0x31, 0x32, 0x35, 0x20, 0x2d, 0x20,
                               0x48, 0x2e, 0x32, 0x36, 0x34, 0x2f, 0x4d, 0x50,
                               0x45, 0x47, 0x2d, 0x34, 0x20, 0x41, 0x56, 0x43,
                               0x20, 0x63, 0x6f, 0x64, 0x65, 0x63, 0x20, 0x2d,
                               0x20, 0x43, 0x6f, 0x70, 0x79, 0x72, 0x69, 0x67,
                               0x68, 0x74, 0x20, 0x32, 0x30, 0x30, 0x33, 0x2d,
                               0x32, 0x30, 0x31, 0x32, 0x20, 0x2d, 0x20, 0x68,
                               0x74, 0x74, 0x70, 0x3a, 0x2f, 0x2f, 0x77, 0x77,
                               0x77, 0x2e, 0x76, 0x69, 0x64, 0x65, 0x6f, 0x6c,
                               0x61, 0x6e, 0x2e, 0x6f, 0x72, 0x67, 0x2f, 0x78,
                               0x32, 0x36, 0x34, 0x2e, 0x68, 0x74, 0x6d, 0x6c,
                               0x20, 0x2d, 0x20, 0x6f, 0x70, 0x74, 0x69, 0x6f,
                               0x6e, 0x73, 0x3a, 0x20, 0x63, 0x61, 0x62, 0x61,
                               0x63, 0x3d, 0x31, 0x20, 0x72, 0x65, 0x66, 0x3d,
                               0x31, 0x20, 0x64, 0x65, 0x62, 0x6c, 0x6f, 0x63,
                               0x6b, 0x3d, 0x31, 0x3a, 0x30, 0x3a, 0x30, 0x20,
                               0x61, 0x6e, 0x61, 0x6c, 0x79, 0x73, 0x65, 0x3d,
                               0x30, 0x78, 0x33, 0x3a, 0x30, 0x78, 0x31, 0x31,
                               0x33, 0x20, 0x6d, 0x65, 0x3d, 0x68, 0x65, 0x78,
                               0x20, 0x73, 0x75, 0x62, 0x6d, 0x65, 0x3d, 0x32,
                               0x20, 0x70, 0x73, 0x79, 0x3d, 0x31, 0x20, 0x70,
                               0x73, 0x79, 0x5f, 0x72, 0x64, 0x3d, 0x31, 0x2e,
                               0x30, 0x30, 0x3a, 0x30, 0x2e, 0x30, 0x30, 0x20,
                               0x6d, 0x69, 0x78, 0x65, 0x64, 0x5f, 0x72, 0x65,
                               0x66, 0x3d, 0x30, 0x20, 0x6d, 0x65, 0x5f, 0x72,
                               0x61, 0x6e, 0x67, 0x65, 0x3d, 0x31, 0x36, 0x20,
                               0x63, 0x68, 0x72, 0x6f, 0x6d, 0x61, 0x5f, 0x6d,
                               0x65, 0x3d, 0x31, 0x20, 0x74, 0x72, 0x65, 0x6c,
                               0x6c, 0x69, 0x73, 0x3d, 0x30, 0x20, 0x38, 0x78,
                               0x38, 0x64, 0x63, 0x74, 0x3d, 0x31, 0x20, 0x63,
                               0x71, 0x6d, 0x3d, 0x30, 0x20, 0x64, 0x65, 0x61,
                               0x64, 0x7a, 0x6f, 0x6e, 0x65, 0x3d, 0x32, 0x31,
                               0x2c, 0x31, 0x31, 0x20, 0x66, 0x61, 0x73, 0x74,
                               0x5f, 0x70, 0x73, 0x6b, 0x69, 0x70, 0x3d, 0x31,
                               0x20, 0x63, 0x68, 0x72, 0x6f, 0x6d, 0x61, 0x5f,
                               0x71, 0x70, 0x5f, 0x6f, 0x66, 0x66, 0x73, 0x65,
                               0x74, 0x3d, 0x30, 0x20, 0x74, 0x68, 0x72, 0x65,
                               0x61, 0x64, 0x73, 0x3d, 0x36, 0x20, 0x6c, 0x6f,
                               0x6f, 0x6b, 0x61, 0x68, 0x65, 0x61, 0x64, 0x5f,
                               0x74, 0x68, 0x72, 0x65, 0x61, 0x64, 0x73, 0x3d,
                               0x31, 0x20, 0x73, 0x6c, 0x69, 0x63, 0x65, 0x64,
                               0x5f, 0x74, 0x68, 0x72, 0x65, 0x61, 0x64, 0x73,
                               0x3d, 0x30, 0x20, 0x6e, 0x72, 0x3d, 0x30, 0x20,
                               0x64, 0x65, 0x63, 0x69, 0x6d, 0x61, 0x74, 0x65,
                               0x3d, 0x31, 0x20, 0x69, 0x6e, 0x74, 0x65, 0x72,
                               0x6c, 0x61, 0x63, 0x65, 0x64, 0x3d, 0x30, 0x20,
                               0x62, 0x6c, 0x75, 0x72, 0x61, 0x79, 0x5f, 0x63,
                               0x6f, 0x6d, 0x70, 0x61, 0x74, 0x3d, 0x30, 0x20,
                               0x63, 0x6f, 0x6e, 0x73, 0x74, 0x72, 0x61, 0x69,
                               0x6e, 0x65, 0x64, 0x5f, 0x69, 0x6e, 0x74, 0x72,
                               0x61, 0x3d, 0x30, 0x20, 0x62, 0x66, 0x72, 0x61,
                               0x6d, 0x65, 0x73, 0x3d, 0x33, 0x20, 0x62, 0x5f,
                               0x70, 0x79, 0x72, 0x61, 0x6d, 0x69, 0x64, 0x3d,
                               0x32, 0x20, 0x62, 0x5f, 0x61, 0x64, 0x61, 0x70,
                               0x74, 0x3d, 0x31, 0x20, 0x62, 0x5f, 0x62, 0x69,
                               0x61, 0x73, 0x3d, 0x30, 0x20, 0x64, 0x69, 0x72,
                               0x65, 0x63, 0x74, 0x3d, 0x31, 0x20, 0x77, 0x65,
                               0x69, 0x67, 0x68, 0x74, 0x62, 0x3d, 0x31, 0x20,
                               0x6f, 0x70, 0x65, 0x6e, 0x5f, 0x67, 0x6f, 0x70,
                               0x3d, 0x30, 0x20, 0x77, 0x65, 0x69, 0x67, 0x68,
                               0x74, 0x70, 0x3d, 0x31, 0x20, 0x6b, 0x65, 0x79,
                               0x69, 0x6e, 0x74, 0x3d, 0x32, 0x35, 0x30, 0x20,
                               0x6b, 0x65, 0x79, 0x69, 0x6e, 0x74, 0x5f, 0x6d,
                               0x69, 0x6e, 0x3d, 0x32, 0x35, 0x20, 0x73, 0x63,
                               0x65, 0x6e, 0x65, 0x63, 0x75, 0x74, 0x3d, 0x34,
                               0x30, 0x20, 0x69, 0x6e, 0x74, 0x72, 0x61, 0x5f,
                               0x72, 0x65, 0x66, 0x72, 0x65, 0x73, 0x68, 0x3d,
                               0x30, 0x20, 0x72, 0x63, 0x5f, 0x6c, 0x6f, 0x6f,
                               0x6b, 0x61, 0x68, 0x65, 0x61, 0x64, 0x3d, 0x31,
                               0x30, 0x20, 0x72, 0x63, 0x3d, 0x61, 0x62, 0x72,
                               0x20, 0x6d, 0x62, 0x74, 0x72, 0x65, 0x65, 0x3d,
                               0x31, 0x20, 0x62, 0x69, 0x74, 0x72, 0x61, 0x74
                           };
            var data2 = new byte[]
                            {
                                0x65, 0x3d, 0x37, 0x35, 0x30, 0x20, 0x72, 0x61,
                                0x74, 0x65, 0x74, 0x6f, 0x6c, 0x3d, 0x31, 0x2e,
                                0x30, 0x20, 0x71, 0x63, 0x6f, 0x6d, 0x70, 0x3d,
                                0x30, 0x2e, 0x36, 0x30, 0x20, 0x71, 0x70, 0x6d,
                                0x69, 0x6e, 0x3d, 0x30, 0x20, 0x71, 0x70, 0x6d,
                                0x61, 0x78, 0x3d, 0x36, 0x39, 0x20, 0x71, 0x70,
                                0x73, 0x74, 0x65, 0x70, 0x3d, 0x34, 0x20, 0x76,
                                0x62, 0x76, 0x5f, 0x6d, 0x61, 0x78, 0x72, 0x61,
                                0x74, 0x65, 0x3d, 0x31, 0x30, 0x30, 0x36, 0x20,
                                0x76, 0x62, 0x76, 0x5f, 0x62, 0x75, 0x66, 0x73,
                                0x69, 0x7a, 0x65, 0x3d, 0x37, 0x35, 0x30, 0x20,
                                0x6e, 0x61, 0x6c, 0x5f, 0x68, 0x72, 0x64, 0x3d,
                                0x6e, 0x6f, 0x6e, 0x65, 0x20, 0x69, 0x70, 0x5f,
                                0x72, 0x61, 0x74, 0x69, 0x6f, 0x3d, 0x31, 0x2e,
                                0x34, 0x30, 0x20, 0x61, 0x71, 0x3d, 0x31, 0x3a,
                                0x31, 0x2e, 0x30, 0x30, 0x00, 0x80, 0x00, 0x00,
                                0x05, 0xb1, 0x65, 0x88, 0x84, 0x00, 0x23, 0xff,
                                0xa8, 0x81, 0x2d, 0x35, 0xe0, 0x01, 0x92, 0xfe,
                                0x63, 0xc5, 0xae, 0x57, 0xad, 0xdd, 0xf7, 0xc6,
                                0x7f, 0x31, 0xbc, 0x4a, 0x81, 0x47, 0x12, 0xcf,
                                0xdb, 0x66, 0x66, 0x7d, 0x6f, 0xd8, 0x45, 0x15,
                                0x87, 0x70, 0xf2, 0x84, 0x1a, 0xae, 0x95, 0xa8,
                                0xde, 0x0d, 0xcd, 0x33, 0x15, 0x54, 0x86, 0x1f,
                                0x91, 0xb0, 0x15, 0x7d, 0x78, 0x41, 0x53, 0x19,
                                0xa3, 0x16, 0xbf, 0x55, 0xfb, 0xab, 0x31, 0x8f,
                                0xf5, 0x35, 0xf0, 0x54, 0x6c, 0x30, 0xc0, 0x7f,
                                0xd1, 0xa4, 0x08, 0x05, 0xfc, 0x84, 0x6e, 0xfe,
                                0x82, 0x8f, 0x31, 0x0a, 0xf2, 0x49, 0x0c, 0x70,
                                0x60, 0x2b, 0xf3, 0x01, 0x07, 0x3b, 0xf0, 0x7b,
                                0x07, 0x0e, 0x1d, 0x9b, 0x34, 0x9b, 0x28, 0x15,
                                0x15, 0xe9, 0xcc, 0x4d, 0x60, 0x26, 0xff, 0xf8,
                                0xb5, 0xa7, 0xd1, 0x46, 0x37, 0x39, 0xa5, 0xdd,
                                0x8a, 0xfe, 0x40, 0x64, 0x72, 0x61, 0x9e, 0x57,
                                0x4e, 0x94, 0xb3, 0x0b, 0xff, 0x23, 0x81, 0x35,
                                0xff, 0x90, 0x7b, 0xc2, 0xcb, 0x61, 0xb7, 0xf2,
                                0x9d, 0x9c, 0xca, 0xbb, 0x5e, 0xbf, 0xab, 0xf1,
                                0x3e, 0xd1, 0x4a, 0x7b, 0x49, 0x77, 0x67, 0x30,
                                0xb0, 0x8c, 0xd5, 0x37, 0xbb, 0xc2, 0xad, 0xa4,
                                0xe1, 0xa7, 0xa7, 0xe6, 0xf1, 0xce, 0x6e, 0x62,
                                0xd6, 0x9a, 0xc1, 0xcf, 0x21, 0x46, 0x93, 0xcb,
                                0x56, 0x6a, 0xd9, 0xe8, 0x63, 0x29, 0xc3, 0x92,
                                0xcf, 0xac, 0xc3, 0x50, 0x92, 0x8b, 0x37, 0x7c,
                                0x80, 0x77, 0x86, 0xe0, 0xed, 0x94, 0x16, 0x00,
                                0x64, 0xf2, 0x9d, 0x0a, 0x60, 0xb0, 0x1e, 0x18,
                                0xdc, 0x27, 0xbd, 0x86, 0xc6, 0xc5, 0x14, 0x38,
                                0x0e, 0x45, 0xf7, 0xb0, 0x93, 0xf7, 0x50, 0x37,
                                0x3a, 0xe3, 0xfc, 0x6a, 0xf2, 0xad, 0xf7, 0x0f,
                                0xc5, 0xd7, 0xf0, 0xb9, 0x4b, 0xf6, 0x6f, 0xc5,
                                0x49, 0xf9, 0x9f, 0xf1, 0xdf, 0x4b, 0x2e, 0xcb,
                                0xdb, 0xd9, 0xbc, 0x77, 0xd4, 0x9e, 0xa3, 0xc9,
                                0x6d, 0x07, 0x63, 0x9a, 0x32, 0xf7, 0xd0, 0xd5,
                                0x9c, 0x0d, 0xfb, 0xd0
                            };

            var memory = new MemoryStream();
            var writer = new BinaryWriter(memory);
            writer.Write(data);
            writer.Write(data2);
            tcpClient.GetStream().Write(memory.ToArray(), 0, memory.ToArray().Length);
            currentState = ClientStates.InProgress;
            writer.Close();
        }

        public void Update()
        {
            if (tcpClient.Available != 0)
            {
                Console.WriteLine("Rec: " + tcpClient.Available);
                var buffer = new byte[tcpClient.Available];
                tcpClient.GetStream().Read(buffer, 0, buffer.Length);

                var memory = new MemoryStream(buffer);
                var reader = new BinaryReader(memory);
                switch (currentState)
                {
                    case ClientStates.None:
                        break;
                    case ClientStates.Handshake:
                        sendHandShakePartTwo(reader.ReadByte(), reader.ReadBytes(HANDSHAKE_TOKEN_SIZE));
                        break;
                    case ClientStates.SendChunkSize:
                        sendChunkSize();
                        break;
                    case ClientStates.Publish:
                        publishFunction();
                        break;
                        case ClientStates.SendSettings:
                        sendStreamSettings();
                        break;
                    case ClientStates.InProgress:
                        Console.WriteLine("ticked");
                        break;
                    default:
                        break;
                }
                reader.Close();
            }
        }
    }
}
